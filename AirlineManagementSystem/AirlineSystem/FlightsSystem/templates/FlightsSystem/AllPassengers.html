{% extends "FLightsSystem/layout.html"%} {% block body%}

<h2>List of all Passengers {{count}}</h2>

<table class="table table-dark table-hover">
  <th>ID</th>
  <th>First Name</th>
  <th>Last Name</th>
  <th>Passport Country</th>
  <th>Passpor Image</th>
  {% for ThisPassenger in allPassengers %}
  <tr>
    <td>
      <a href="{% url 'FlightsSystem:pDetails' ThisPassenger.id %}"
        >{{ThisPassenger.id}}</a
      >
    </td>
    <td>
      <a href="{% url 'FlightsSystem:pDetails' ThisPassenger.id %}"
        >{{ThisPassenger.first}}</a
      >
    </td>
    <td>
      <a href="{% url 'FlightsSystem:pDetails' ThisPassenger.id %}"
        >{{ThisPassenger.last}}</a
      >
    </td>
    <td>
      <a href="{% url 'FlightsSystem:pDetails' ThisPassenger.id %}"
        >{{ThisPassenger.passportCountry}}</a
      >
    </td>
    <td>
      <a href="#" class="image-link">
        <img
          src="{{ ThisPassenger.passport_photo.url }}"
          alt="Passport Photo"
          width="100"
          height="100"
          alt="Passport photo"
        />
      </a>
    </td>
  </tr>
  {% endfor %}
</table>

<div style="text-align: center">
  <button class="btn btn-dark">
    <a href="{% url 'FlightsSystem:index' %}">Home Page</a>
  </button>
</div>

<!-- Below Script and Div is for image view -->
<div id="imageModal" class="modal">
  <span class="close">&times;</span>
  <img class="modal-content" id="img01" style="height: 300px; width: 300px" />
  <div id="caption"></div>
</div>

<script>
  $(document).ready(function () {
    // Get the modal
    var modal = $("#imageModal");

    // Get the image and insert it inside the modal - use its "alt" text as a caption
    $(".image-link").click(function () {
      modal.css("display", "block");

      var img = $(this).find("img");
      $("#img01").attr("src", img.attr("src"));
      $("#caption").text(img.attr("alt"));
    });

    // Get the <span> element that closes the modal
    var span = $(".close")[0];

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
      modal.css("display", "none");
    };
  });
</script>

{% endblock%}
